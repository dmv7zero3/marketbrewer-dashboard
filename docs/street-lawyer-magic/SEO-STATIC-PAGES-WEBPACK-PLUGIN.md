# SEO Static Pages Webpack Plugin Implementation

## Overview

This document provides instructions for implementing a custom Webpack plugin that generates static HTML pages for SEO purposes. The plugin integrates with the existing Street Lawyer Magic website build pipeline.

**Goal**: Generate 2,142 static HTML pages (17 services × 63 locations × 2 languages) that:
- Match the existing site design (Header, Footer, Navigation, Tailwind CSS)
- Are fully crawlable by Google without JavaScript execution
- Deploy via the existing S3/CloudFront pipeline

---

## Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                        BUILD PIPELINE                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  INPUT: seo-pages/pages.json                                    │
│    └── Generated by MarketBrewer SEO Platform                   │
│                                                                  │
│  WEBPACK BUILD                                                   │
│    ├── Normal React SPA build (existing)                        │
│    └── SEOStaticPagesPlugin (afterEmit hook)                    │
│        ├── Reads pages.json                                     │
│        ├── Loads HTML template                                  │
│        ├── Injects compiled CSS path from manifest              │
│        ├── Generates HTML for each page                         │
│        └── Writes to dist/[service]/[location]/index.html       │
│                                                                  │
│  OUTPUT: dist/                                                   │
│    ├── index.html (React SPA)                                   │
│    ├── [existing SPA routes]                                    │
│    ├── criminal-defense-lawyer/                                 │
│    │   ├── washington-dc/index.html                             │
│    │   ├── bethesda-md/index.html                               │
│    │   └── ...                                                  │
│    ├── abogado-de-defensa-criminal/                             │
│    │   └── ...                                                  │
│    └── sitemap.xml (auto-updated)                               │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## File Structure to Create

```
street-lawyer-magic-website/
├── webpack/
│   ├── plugins/
│   │   └── SEOStaticPagesPlugin.js    # NEW: Custom webpack plugin
│   └── webpack.prod.js                 # MODIFY: Register plugin
│
├── src/
│   └── templates/
│       └── seo-page.html               # NEW: HTML template for SEO pages
│
├── seo-pages/                          # NEW: SEO page data directory
│   ├── pages.json                      # Page content & metadata (from MarketBrewer)
│   └── README.md                       # Documentation
│
├── scripts/
│   └── generate-sitemap.js             # MODIFY: Include SEO pages
│
└── package.json                        # MODIFY: Add dependencies if needed
```

---

## Step 1: Create the Webpack Plugin

Create file: `webpack/plugins/SEOStaticPagesPlugin.js`

```javascript
/**
 * SEO Static Pages Webpack Plugin
 *
 * Generates static HTML pages for SEO after the main webpack build completes.
 * Pages are generated from JSON data exported by MarketBrewer SEO Platform.
 */

const fs = require('fs');
const path = require('path');

class SEOStaticPagesPlugin {
  constructor(options = {}) {
    this.options = {
      pagesJsonPath: options.pagesJsonPath || './seo-pages/pages.json',
      templatePath: options.templatePath || './src/templates/seo-page.html',
      enabled: options.enabled !== false, // Default: enabled
      verbose: options.verbose || false,
    };
  }

  apply(compiler) {
    const pluginName = 'SEOStaticPagesPlugin';

    compiler.hooks.afterEmit.tapAsync(pluginName, async (compilation, callback) => {
      if (!this.options.enabled) {
        console.log(`[${pluginName}] Disabled, skipping static page generation`);
        return callback();
      }

      // Check if pages.json exists
      const pagesJsonPath = path.resolve(compiler.context, this.options.pagesJsonPath);
      if (!fs.existsSync(pagesJsonPath)) {
        console.log(`[${pluginName}] No pages.json found at ${pagesJsonPath}, skipping`);
        return callback();
      }

      console.log(`[${pluginName}] Starting static page generation...`);

      try {
        // Load page data
        const pagesData = JSON.parse(fs.readFileSync(pagesJsonPath, 'utf8'));
        const pages = pagesData.pages || [];

        if (pages.length === 0) {
          console.log(`[${pluginName}] No pages to generate`);
          return callback();
        }

        // Load HTML template
        const templatePath = path.resolve(compiler.context, this.options.templatePath);
        if (!fs.existsSync(templatePath)) {
          throw new Error(`Template not found: ${templatePath}`);
        }
        const template = fs.readFileSync(templatePath, 'utf8');

        // Get compiled asset paths from webpack stats
        const stats = compilation.getStats().toJson();
        const assetsByChunkName = stats.assetsByChunkName || {};

        // Find main CSS file (from the main chunk)
        let cssPath = '';
        const mainAssets = assetsByChunkName.main || [];
        const cssAsset = (Array.isArray(mainAssets) ? mainAssets : [mainAssets])
          .find(asset => asset.endsWith('.css'));
        if (cssAsset) {
          cssPath = '/' + cssAsset;
        }

        // Find common JS for minimal interactivity (optional)
        let jsPath = '';
        const jsAsset = (Array.isArray(mainAssets) ? mainAssets : [mainAssets])
          .find(asset => asset.endsWith('.js') && !asset.includes('runtime'));
        if (jsAsset) {
          jsPath = '/' + jsAsset;
        }

        const outputPath = compiler.outputPath;
        let generatedCount = 0;
        let errorCount = 0;

        for (const page of pages) {
          try {
            const html = this.renderPage(template, page, { cssPath, jsPath });
            const pagePath = path.join(outputPath, page.slug, 'index.html');

            // Create directory if needed
            fs.mkdirSync(path.dirname(pagePath), { recursive: true });

            // Write HTML file
            fs.writeFileSync(pagePath, html, 'utf8');
            generatedCount++;

            if (this.options.verbose) {
              console.log(`  Generated: ${page.slug}/index.html`);
            }
          } catch (err) {
            errorCount++;
            console.error(`  Error generating ${page.slug}: ${err.message}`);
          }
        }

        console.log(`[${pluginName}] Generated ${generatedCount} pages (${errorCount} errors)`);

        // Generate sitemap entries file for sitemap script
        this.generateSitemapEntries(outputPath, pages, pagesData.siteUrl);

        callback();
      } catch (err) {
        console.error(`[${pluginName}] Fatal error: ${err.message}`);
        callback(err);
      }
    });
  }

  /**
   * Render a single page using the template
   */
  renderPage(template, page, assets) {
    const { cssPath, jsPath } = assets;

    // Build sections HTML
    const sectionsHtml = (page.content.sections || [])
      .map(section => `
        <section class="mb-8">
          <h2 class="text-2xl font-bold text-burgundy-800 mb-4">${this.escapeHtml(section.heading)}</h2>
          <div class="prose prose-lg max-w-none text-charcoal-700">
            ${section.body}
          </div>
        </section>
      `).join('\n');

    // Build breadcrumb JSON-LD
    const breadcrumbJsonLd = {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": page.meta.siteUrl || "https://streetlawyermagic.com"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": page.service.name,
          "item": `${page.meta.siteUrl || "https://streetlawyermagic.com"}/${page.service.slug}/`
        },
        {
          "@type": "ListItem",
          "position": 3,
          "name": `${page.location.city}, ${page.location.state}`,
          "item": page.meta.canonical
        }
      ]
    };

    // Replace template placeholders
    let html = template
      // Meta tags
      .replace(/\{\{lang\}\}/g, page.language || 'en')
      .replace(/\{\{title\}\}/g, this.escapeHtml(page.meta.title))
      .replace(/\{\{description\}\}/g, this.escapeHtml(page.meta.description))
      .replace(/\{\{canonical\}\}/g, page.meta.canonical)
      .replace(/\{\{ogImage\}\}/g, page.meta.ogImage || '/images/og-default.jpg')

      // Assets
      .replace(/\{\{cssPath\}\}/g, cssPath)
      .replace(/\{\{jsPath\}\}/g, jsPath)

      // Structured data
      .replace(/\{\{structuredData\}\}/g, JSON.stringify(page.structuredData, null, 0))
      .replace(/\{\{breadcrumbJsonLd\}\}/g, JSON.stringify(breadcrumbJsonLd, null, 0))

      // Content
      .replace(/\{\{h1\}\}/g, this.escapeHtml(page.content.h1))
      .replace(/\{\{intro\}\}/g, page.content.intro)
      .replace(/\{\{sections\}\}/g, sectionsHtml)
      .replace(/\{\{cta\}\}/g, this.escapeHtml(page.content.cta))
      .replace(/\{\{phone\}\}/g, page.business?.phone || '240-478-2189')

      // Location
      .replace(/\{\{city\}\}/g, this.escapeHtml(page.location.city))
      .replace(/\{\{state\}\}/g, this.escapeHtml(page.location.state))
      .replace(/\{\{serviceName\}\}/g, this.escapeHtml(page.service.name));

    return html;
  }

  /**
   * Generate sitemap entries JSON for the sitemap generator script
   */
  generateSitemapEntries(outputPath, pages, siteUrl) {
    const entries = pages.map(page => ({
      url: page.meta.canonical,
      lastmod: new Date().toISOString().split('T')[0],
      changefreq: 'monthly',
      priority: 0.8,
    }));

    const sitemapEntriesPath = path.join(outputPath, 'seo-sitemap-entries.json');
    fs.writeFileSync(sitemapEntriesPath, JSON.stringify(entries, null, 2), 'utf8');
    console.log(`[SEOStaticPagesPlugin] Sitemap entries written to seo-sitemap-entries.json`);
  }

  /**
   * Escape HTML special characters
   */
  escapeHtml(text) {
    if (!text) return '';
    return text
      .replace(/&/g, '&amp;')
      .replace(/</g, '&lt;')
      .replace(/>/g, '&gt;')
      .replace(/"/g, '&quot;')
      .replace(/'/g, '&#039;');
  }
}

module.exports = SEOStaticPagesPlugin;
```

---

## Step 2: Create the HTML Template

Create file: `src/templates/seo-page.html`

```html
<!DOCTYPE html>
<html lang="{{lang}}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Primary Meta Tags -->
  <title>{{title}}</title>
  <meta name="title" content="{{title}}">
  <meta name="description" content="{{description}}">
  <link rel="canonical" href="{{canonical}}">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="{{canonical}}">
  <meta property="og:title" content="{{title}}">
  <meta property="og:description" content="{{description}}">
  <meta property="og:image" content="{{ogImage}}">
  <meta property="og:site_name" content="Street Lawyer Magic">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="{{canonical}}">
  <meta name="twitter:title" content="{{title}}">
  <meta name="twitter:description" content="{{description}}">
  <meta name="twitter:image" content="{{ogImage}}">

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">

  <!-- Preconnect to external resources -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Stylesheet (same as main site) -->
  <link rel="stylesheet" href="{{cssPath}}">

  <!-- Structured Data -->
  <script type="application/ld+json">{{structuredData}}</script>
  <script type="application/ld+json">{{breadcrumbJsonLd}}</script>
</head>
<body class="bg-smoke-50 text-charcoal-900 font-sans antialiased">

  <!-- HEADER: Copy from existing site or use simplified version -->
  <header class="bg-burgundy-900 text-white sticky top-0 z-50 shadow-lg">
    <div class="container mx-auto px-4">
      <div class="flex items-center justify-between h-16 md:h-20">
        <!-- Logo -->
        <a href="/" class="flex items-center space-x-2">
          <img src="/images/logo-white.png" alt="Street Lawyer Magic" class="h-10 md:h-12 w-auto">
        </a>

        <!-- Navigation -->
        <nav class="hidden md:flex items-center space-x-8">
          <a href="/" class="hover:text-gold-400 transition-colors">Home</a>
          <a href="/practice-areas" class="hover:text-gold-400 transition-colors">Practice Areas</a>
          <a href="/locations" class="hover:text-gold-400 transition-colors">Locations</a>
          <a href="/about" class="hover:text-gold-400 transition-colors">About</a>
          <a href="/contact" class="hover:text-gold-400 transition-colors">Contact</a>
        </nav>

        <!-- CTA Button -->
        <a href="tel:{{phone}}" class="bg-gold-500 hover:bg-gold-600 text-burgundy-900 font-bold px-4 py-2 rounded-lg transition-colors">
          Call Now
        </a>
      </div>
    </div>
  </header>

  <!-- BREADCRUMB -->
  <nav aria-label="Breadcrumb" class="bg-smoke-100 border-b border-smoke-200">
    <div class="container mx-auto px-4 py-3">
      <ol class="flex items-center space-x-2 text-sm text-charcoal-600">
        <li><a href="/" class="hover:text-burgundy-700">Home</a></li>
        <li><span class="mx-2">/</span></li>
        <li><a href="/practice-areas" class="hover:text-burgundy-700">{{serviceName}}</a></li>
        <li><span class="mx-2">/</span></li>
        <li class="text-burgundy-800 font-medium">{{city}}, {{state}}</li>
      </ol>
    </div>
  </nav>

  <!-- MAIN CONTENT -->
  <main class="container mx-auto px-4 py-8 md:py-12">
    <article class="max-w-4xl mx-auto">

      <!-- H1 Headline -->
      <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold text-burgundy-900 mb-6 leading-tight">
        {{h1}}
      </h1>

      <!-- Intro Paragraph -->
      <div class="text-lg md:text-xl text-charcoal-700 mb-8 leading-relaxed">
        {{intro}}
      </div>

      <!-- CTA Box -->
      <div class="bg-burgundy-50 border-l-4 border-burgundy-600 p-6 mb-8 rounded-r-lg">
        <p class="text-burgundy-900 font-semibold text-lg mb-3">{{cta}}</p>
        <a href="tel:{{phone}}" class="inline-flex items-center bg-burgundy-700 hover:bg-burgundy-800 text-white font-bold px-6 py-3 rounded-lg transition-colors">
          <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
            <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
          </svg>
          {{phone}}
        </a>
      </div>

      <!-- Content Sections -->
      {{sections}}

      <!-- Bottom CTA -->
      <div class="mt-12 bg-charcoal-900 text-white p-8 rounded-xl text-center">
        <h2 class="text-2xl md:text-3xl font-bold mb-4">Ready to Fight Your Case?</h2>
        <p class="text-smoke-300 mb-6">Get aggressive representation from an experienced attorney.</p>
        <a href="tel:{{phone}}" class="inline-flex items-center bg-gold-500 hover:bg-gold-600 text-charcoal-900 font-bold px-8 py-4 rounded-lg text-lg transition-colors">
          <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20">
            <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
          </svg>
          Call {{phone}} Now
        </a>
      </div>

    </article>
  </main>

  <!-- FOOTER: Copy from existing site or use simplified version -->
  <footer class="bg-charcoal-900 text-smoke-300 py-12">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">

        <!-- Logo & Description -->
        <div class="md:col-span-2">
          <img src="/images/logo-white.png" alt="Street Lawyer Magic" class="h-12 w-auto mb-4">
          <p class="text-smoke-400 mb-4">
            Aggressive criminal defense representation in Washington DC and Maryland.
            Over 4,000 cases handled since 2005.
          </p>
          <p class="text-gold-400 font-semibold">Available 24/7 for Emergencies</p>
        </div>

        <!-- Quick Links -->
        <div>
          <h3 class="text-white font-bold mb-4">Quick Links</h3>
          <ul class="space-y-2">
            <li><a href="/" class="hover:text-gold-400 transition-colors">Home</a></li>
            <li><a href="/practice-areas" class="hover:text-gold-400 transition-colors">Practice Areas</a></li>
            <li><a href="/locations" class="hover:text-gold-400 transition-colors">Locations</a></li>
            <li><a href="/about" class="hover:text-gold-400 transition-colors">About</a></li>
            <li><a href="/contact" class="hover:text-gold-400 transition-colors">Contact</a></li>
          </ul>
        </div>

        <!-- Contact Info -->
        <div>
          <h3 class="text-white font-bold mb-4">Contact</h3>
          <ul class="space-y-2">
            <li>
              <a href="tel:{{phone}}" class="hover:text-gold-400 transition-colors flex items-center">
                <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                </svg>
                {{phone}}
              </a>
            </li>
            <li>
              <a href="mailto:lonny@streetlawyermagic.com" class="hover:text-gold-400 transition-colors">
                lonny@streetlawyermagic.com
              </a>
            </li>
          </ul>

          <!-- Social Links -->
          <div class="flex space-x-4 mt-4">
            <a href="https://instagram.com/lonnythestreetlawyer" target="_blank" rel="noopener" class="hover:text-gold-400 transition-colors">
              <span class="sr-only">Instagram</span>
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073z"/>
                <path d="M12 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4z"/>
                <circle cx="18.406" cy="5.594" r="1.44"/>
              </svg>
            </a>
            <a href="https://www.linkedin.com/in/lonny-bramzon-b335ab7/" target="_blank" rel="noopener" class="hover:text-gold-400 transition-colors">
              <span class="sr-only">LinkedIn</span>
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
              </svg>
            </a>
            <a href="https://www.tiktok.com/@lonnythestreetlawyer" target="_blank" rel="noopener" class="hover:text-gold-400 transition-colors">
              <span class="sr-only">TikTok</span>
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/>
              </svg>
            </a>
          </div>
        </div>

      </div>

      <!-- Copyright -->
      <div class="border-t border-charcoal-700 mt-8 pt-8 text-center text-smoke-500 text-sm">
        <p>&copy; 2025 Street Lawyer Magic. All rights reserved.</p>
        <div class="mt-2 space-x-4">
          <a href="/privacy-policy" class="hover:text-gold-400 transition-colors">Privacy Policy</a>
          <a href="/terms-of-service" class="hover:text-gold-400 transition-colors">Terms of Service</a>
        </div>
      </div>

    </div>
  </footer>

  <!-- Minimal JS for interactivity (optional) -->
  <!-- <script src="{{jsPath}}" defer></script> -->

</body>
</html>
```

---

## Step 3: Register Plugin in Webpack Config

Modify file: `webpack/webpack.prod.js`

Add the following:

```javascript
// At the top of the file, add import:
const SEOStaticPagesPlugin = require('./plugins/SEOStaticPagesPlugin');

// In the plugins array, add:
plugins: [
  // ... existing plugins ...

  // SEO Static Pages Generator
  new SEOStaticPagesPlugin({
    pagesJsonPath: './seo-pages/pages.json',
    templatePath: './src/templates/seo-page.html',
    enabled: true,  // Set to false to disable
    verbose: process.env.SEO_VERBOSE === 'true',
  }),
],
```

---

## Step 4: Create SEO Pages Directory

Create directory: `seo-pages/`

Create file: `seo-pages/README.md`

```markdown
# SEO Pages Data

This directory contains page data generated by MarketBrewer SEO Platform.

## Files

- `pages.json` - Page content and metadata for static generation

## Usage

1. Export page data from MarketBrewer SEO Platform
2. Copy `pages.json` to this directory
3. Run `npm run build` to generate static HTML pages

## Schema

See `pages.json.schema.md` for the expected data format.
```

Create file: `seo-pages/pages.json` (placeholder):

```json
{
  "generatedAt": "2025-01-01T00:00:00Z",
  "business": "street-lawyer-magic",
  "siteUrl": "https://streetlawyermagic.com",
  "pages": []
}
```

---

## Step 5: Update Sitemap Generation

Modify file: `scripts/generate-sitemap.js`

Add logic to include SEO pages:

```javascript
// After generating sitemap for React routes, add SEO pages:

const fs = require('fs');
const path = require('path');

// Load SEO page entries if they exist
const seoEntriesPath = path.join(__dirname, '../dist/seo-sitemap-entries.json');
if (fs.existsSync(seoEntriesPath)) {
  const seoEntries = JSON.parse(fs.readFileSync(seoEntriesPath, 'utf8'));

  // Add each SEO page to sitemap
  for (const entry of seoEntries) {
    sitemap += `
  <url>
    <loc>${entry.url}</loc>
    <lastmod>${entry.lastmod}</lastmod>
    <changefreq>${entry.changefreq}</changefreq>
    <priority>${entry.priority}</priority>
  </url>`;
  }
}
```

---

## Step 6: Page Data JSON Schema

The `pages.json` file from MarketBrewer should follow this schema:

```typescript
interface PagesJson {
  generatedAt: string;          // ISO 8601 timestamp
  business: string;             // Business slug
  siteUrl: string;              // Base URL (e.g., "https://streetlawyermagic.com")
  pages: Page[];
}

interface Page {
  slug: string;                 // URL path (e.g., "criminal-defense-lawyer/bethesda-md")
  language: "en" | "es";

  service: {
    name: string;               // Display name (e.g., "Criminal Defense")
    nameEs?: string;            // Spanish name
    slug: string;               // URL slug (e.g., "criminal-defense-lawyer")
  };

  location: {
    city: string;
    state: string;              // 2-letter code (e.g., "MD")
    slug: string;               // URL slug (e.g., "bethesda-md")
  };

  meta: {
    title: string;              // SEO title (50-60 chars)
    description: string;        // Meta description (150-160 chars)
    canonical: string;          // Full canonical URL
    ogImage?: string;           // Open Graph image path
    siteUrl: string;            // Base URL for breadcrumbs
  };

  content: {
    h1: string;                 // Main headline
    intro: string;              // Opening paragraph (can include HTML)
    sections: Section[];        // Content sections
    cta: string;                // Call to action text
  };

  business: {
    name: string;
    phone: string;
    email: string;
  };

  structuredData: object;       // JSON-LD LegalService schema
}

interface Section {
  heading: string;              // H2 heading
  body: string;                 // HTML content
}
```

---

## Deployment

After implementing the plugin:

```bash
# 1. Copy pages.json from MarketBrewer export to seo-pages/
cp /path/to/exported/pages.json ./seo-pages/pages.json

# 2. Build (generates React SPA + static SEO pages)
npm run build

# 3. Verify generated pages
ls -la dist/criminal-defense-lawyer/

# 4. Deploy to S3/CloudFront
npm run deploy
```

---

## Verification Checklist

After deployment, verify:

- [ ] Static HTML pages exist in S3 at correct paths
- [ ] Pages load without JavaScript (disable JS in browser)
- [ ] Meta tags render correctly (use browser dev tools)
- [ ] Structured data validates (Google Rich Results Test)
- [ ] Sitemap includes all SEO pages
- [ ] CloudFront serves pages with correct cache headers
- [ ] Google Search Console can fetch and render pages

---

## Troubleshooting

### Plugin not running
- Check `enabled: true` in webpack config
- Verify `pages.json` exists in `seo-pages/` directory

### CSS not loading
- Ensure `cssPath` is being extracted correctly from webpack stats
- Check that main CSS chunk name matches

### Template errors
- All `{{placeholder}}` must have corresponding data in pages.json
- Check for unescaped special characters in content

### Build too slow
- For 2,000+ pages, build may take 1-2 minutes
- Consider chunking pages.json for incremental builds

---

## Support

For issues with:
- **Page data generation**: Contact MarketBrewer SEO Platform support
- **Webpack plugin**: Check this documentation or webpack logs
- **Deployment**: Review AWS S3/CloudFront configuration
