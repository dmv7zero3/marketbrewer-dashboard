# MarketBrewer SEO Platform â€” Environment Configuration
# Copy this to .env and fill in actual values for your environment

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================

# Server port (default: 3001)
SERVER_PORT=3001

# Server host (default: localhost, use 0.0.0.0 for EC2)
SERVER_HOST=localhost

# Node environment (development | staging | production)
NODE_ENV=development

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# SQLite database file path
# Local: ./data/seo-platform.db
# EC2: /var/lib/marketbrewer/seo-platform.db
DATABASE_PATH=./data/seo-platform.db

# Database backup directory (optional)
DATABASE_BACKUP_DIR=./data/backups

# Enable database logging (development only)
DATABASE_DEBUG=false

# ============================================================================
# OLLAMA CONFIGURATION
# ============================================================================

# Ollama API endpoint
# Local: http://localhost:11434
# EC2: http://localhost:11434 (Ollama runs on same instance)
OLLAMA_BASE_URL=http://localhost:11434

# Ollama model name
OLLAMA_MODEL=llama3.2

# Ollama request timeout (milliseconds)
OLLAMA_TIMEOUT=60000

# Generate endpoint (full URL to /api/generate)
# Used by worker to call LLM
OLLAMA_GENERATE_URL=http://localhost:11434/api/generate

# ============================================================================
# WORKER CONFIGURATION
# ============================================================================

# Worker poll interval (milliseconds) - how often to check for pending jobs
WORKER_POLL_INTERVAL=5000

# Worker batch size - how many jobs to process at once
WORKER_BATCH_SIZE=5

# Worker timeout per job (milliseconds)
WORKER_TIMEOUT=120000

# Worker retry attempts for failed jobs
WORKER_RETRY_ATTEMPTS=3

# Enable worker logging
WORKER_DEBUG=false

# ============================================================================
# CORS & SECURITY
# ============================================================================

# Allowed origins for CORS (comma-separated)
# Local: http://localhost:3000
# EC2: http://your-domain.com,https://your-domain.com
CORS_ORIGINS=http://localhost:3000

# API rate limiting (requests per minute)
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=1000

# ============================================================================
# LOGGING
# ============================================================================

# Log level (error | warn | info | debug | trace)
LOG_LEVEL=info

# Log format (json | pretty)
LOG_FORMAT=pretty

# Log directory (optional, stdout if not set)
LOG_DIR=./logs

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================

# Enable request logging middleware
ENABLE_REQUEST_LOGGING=true

# Enable health check endpoint (/health)
ENABLE_HEALTH_CHECK=true

# Health check interval (milliseconds)
HEALTH_CHECK_INTERVAL=30000

# ============================================================================
# DEPLOYMENT SPECIFIC
# ============================================================================

# AWS Region (if using AWS services in future)
AWS_REGION=us-east-1

# Environment tag for logging/monitoring
ENVIRONMENT_NAME=development

# Feature flags (JSON string or individual vars)
FEATURE_FLAGS_ADD_BUSINESS=true
FEATURE_FLAGS_JOBS=true
FEATURE_FLAGS_QUESTIONNAIRE=true
FEATURE_FLAGS_WEBSITE_MANAGEMENT=false

# ============================================================================
# PERFORMANCE & LIMITS
# ============================================================================

# Max questionnaire field count
MAX_QUESTIONNAIRE_FIELDS=500

# Max service areas per business
MAX_SERVICE_AREAS=100

# Max keywords per business
MAX_KEYWORDS=500

# Max concurrent jobs per business
MAX_CONCURRENT_JOBS=10

# Bulk operation chunk size (for importing data)
BULK_OPERATION_CHUNK_SIZE=50

# ============================================================================
# DEVELOPMENT ONLY
# ============================================================================

# Seed database on startup (development only)
SEED_DATABASE=false

# Mock Ollama responses (for testing without actual LLM)
MOCK_OLLAMA=false

# Verbose error messages (development only)
VERBOSE_ERRORS=false

# ============================================================================
# Notes
# ============================================================================

# For EC2 deployment:
# 1. Set SERVER_HOST=0.0.0.0 to listen on all interfaces
# 2. Set DATABASE_PATH to persistent location (e.g., /var/lib/marketbrewer/)
# 3. Set CORS_ORIGINS to your domain
# 4. Set NODE_ENV=production
# 5. Set LOG_LEVEL=warn (unless debugging)
# 6. Ensure Ollama is running and accessible at OLLAMA_BASE_URL

# For local development:
# 1. Use defaults (mostly localhost)
# 2. Set SEED_DATABASE=true to populate test data
# 3. Set LOG_LEVEL=debug for verbose output
